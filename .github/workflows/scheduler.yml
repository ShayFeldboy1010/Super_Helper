name: AI Assistant Scheduler

on:
  schedule:
    # Run every 30 minutes for reminders
    - cron: '*/30 * * * *'

jobs:
  check-reminders:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Reminder Check
        env:
          RENDER_URL: ${{ secrets.RENDER_URL }}
          CRON_SECRET: ${{ secrets.CRON_SECRET }}
        run: |
          if [ -z "$RENDER_URL" ]; then
            echo "RENDER_URL not set, skipping."
            exit 0
          fi

          echo "Triggering Reminders..."
          curl -sf -X GET "$RENDER_URL/api/cron/check-reminders" \
            -H "Authorization: Bearer $CRON_SECRET" \
            -H "Content-Type: application/json"
